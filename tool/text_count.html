<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文字数カウント - Useful Tool Site</title>
    <link rel="stylesheet" href="../system/css/main.css">
    <style>
        .count-container {
            max-width: 900px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .editor-wrapper {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 20px;
        }

        .text-area {
            width: 100%;
            height: 60vh;
            background-color: #1a1a1a;
            color: #eee;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
            resize: none;
            outline: none;
        }

        .text-area:focus { border-color: #00f0ff; }

        /* サイドバーの統計情報 */
        .stats-sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stat-item {
            background: #121212;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
        }

        .stat-item .label {
            display: block;
            color: #888;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .stat-item .value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00f0ff;
        }

        .stat-item .unit {
            font-size: 0.9rem;
            color: #555;
            margin-left: 5px;
        }

        .btn-clear {
            width: 100%;
            padding: 10px;
            background: #333;
            color: #ccc;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .btn-clear:hover { background: #444; color: #fff; }

        @media (max-width: 768px) {
            .editor-wrapper { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body class="dark-theme">
    <header>
        <div class="header-container">
            <a href="../index.html" style="text-decoration:none; color:#fff;"><h1>Text Counter</h1></a>
        </div>
    </header>

    <main class="count-container">
        <div class="editor-wrapper">
            <textarea id="textInput" class="text-area" placeholder="ここに文章を入力またはペーストしてください..."></textarea>
            
            <aside class="stats-sidebar">
                <div class="stat-item">
                    <span class="label">文字数 (全角・半角)</span>
                    <span id="charCount" class="value">0</span><span class="unit">文字</span>
                </div>
                <div class="stat-item">
                    <span class="label">文字数 (空白・改行除く)</span>
                    <span id="charCountNoSpace" class="value">0</span><span class="unit">文字</span>
                </div>
                <div class="stat-item">
                    <span class="label">行数</span>
                    <span id="lineCount" class="value">0</span><span class="unit">行</span>
                </div>
                <div class="stat-item">
                    <span class="label">原稿用紙 (400字)</span>
                    <span id="paperCount" class="value">0</span><span class="unit">枚</span>
                </div>
                <button class="btn-clear" onclick="clearText()">テキストを消去</button>
            </aside>
        </div>
    </main>

    <script>
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');
        const charCountNoSpace = document.getElementById('charCountNoSpace');
        const lineCount = document.getElementById('lineCount');
        const paperCount = document.getElementById('paperCount');

        textInput.addEventListener('input', updateStats);

        function updateStats() {
            const text = textInput.value;

            // 1. 全文字数
            charCount.textContent = text.length;

            // 2. 空白・改行を除く文字数
            const noSpaceText = text.replace(/\s+/g, '');
            charCountNoSpace.textContent = noSpaceText.length;

            // 3. 行数 (空の状態なら0、そうでなければ改行の数+1)
            lineCount.textContent = text ? text.split(/\r\n|\r|\n/).length : 0;

            // 4. 原稿用紙換算 (400字詰め)
            paperCount.textContent = Math.ceil(text.length / 400);
        }

        function clearText() {
            if (confirm('入力したテキストを消去しますか？')) {
                textInput.value = '';
                updateStats();
            }
        }
    </script>
</body>
</html>